<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Github Pages on (rudolph-miller)</title>
    <link>https://blog.rudolph-miller.com/tags/github-pages/</link>
    <description>Recent content in Github Pages on (rudolph-miller)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <copyright>&amp;copy; 2015 Rudolph Miller</copyright>
    <lastBuildDate>Fri, 29 Jan 2016 17:18:42 +0900</lastBuildDate>
    <atom:link href="https://blog.rudolph-miller.com/tags/github-pages/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Use SSL with Custom Domain on GitHub Pages</title>
      <link>https://blog.rudolph-miller.com/2016/01/29/use-ssl-with-custom-domain-on-gh-pages/</link>
      <pubDate>Fri, 29 Jan 2016 17:18:42 +0900</pubDate>
      
      <guid>https://blog.rudolph-miller.com/2016/01/29/use-ssl-with-custom-domain-on-gh-pages/</guid>
      <description>

&lt;p&gt;Custom domainなGitHub PagesをSSL対応する.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;#ssl-on-github-pages:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;SSL on GitHub Pages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#cloudflare:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;CloudFlare&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#see-also:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;See Also&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;ssl-on-github-pages:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;SSL on GitHub Pages&lt;/h1&gt;

&lt;p&gt;&lt;em&gt;blog.rudolph-miller.com&lt;/em&gt; はGitHub Pagesで配信しており、
ふとGitHub PagesはSSL対応しているのかと思い調べてみた.&lt;/p&gt;

&lt;p&gt;defaultの &lt;em&gt;github.io&lt;/em&gt; domainの場合はSSL対応しているが (&lt;a href=&#34;https://github.com/isaacs/github/issues/156&#34;&gt;公式には完了していない??&lt;/a&gt;) 、
Custom domainを使用している場合は証明書のdomainが異なるためGitHubの発行している証明書ではSSLが使えないようだった.&lt;/p&gt;

&lt;p&gt;なにかやり方がないかと調べていると、
&lt;a href=&#34;https://www.cloudflare.com/&#34;&gt;CloudFlare&lt;/a&gt;のDNSを使えばCustom domainでもSSL対応できそうだったのでやってみた.&lt;/p&gt;

&lt;h1 id=&#34;cloudflare:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;CloudFlare&lt;/h1&gt;

&lt;h2 id=&#34;about:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;About&lt;/h2&gt;

&lt;p&gt;CloudFlareはCDNやDNSをやってるUSの企業.
Freeプランがあり、基本無料で使える.&lt;/p&gt;

&lt;h2 id=&#34;setting:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;Setting&lt;/h2&gt;

&lt;p&gt;Sign upからdomainの登録は迷わないと思うので割愛.&lt;/p&gt;

&lt;p&gt;今回した設定は &lt;code&gt;SSL&lt;/code&gt;, &lt;code&gt;HSTS&lt;/code&gt;, &lt;code&gt;Subdomain&lt;/code&gt;.
基本的にはCloudFlareの管理画面のDomain毎のOverviewの上のMenuから入って設定する.&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/menu.png&#34; alt=&#34;20160129/menu.png&#34;&gt;


&lt;h3 id=&#34;ssl:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;SSL&lt;/h3&gt;

&lt;p&gt;SSLの設定は上のMenuの &lt;code&gt;Crypto&lt;/code&gt;&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/crypto.png&#34; alt=&#34;20160129/crypto.png&#34;&gt;


&lt;p&gt;から行う.&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/ssl.png&#34; alt=&#34;20160129/ssl.png&#34;&gt;


&lt;p&gt;SSLの設定は &lt;code&gt;Off&lt;/code&gt;, &lt;code&gt;Flexible&lt;/code&gt;, &lt;code&gt;Full&lt;/code&gt;, &lt;code&gt;Strict&lt;/code&gt; と選べる.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Flexible&lt;/code&gt;: ClientとCloudFlareの間は暗号化されたConnectionを使い、CloudFlareからServerは暗号化されてないConnectionを使う.

&lt;ul&gt;
&lt;li&gt;ServerにSSL証明書が必要ない.&lt;/li&gt;
&lt;li&gt;今回はこれを使用.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Full&lt;/code&gt;: ClientとCloudFlare間もCloudFlareからServer間も暗号化されたConnectionを使う.

&lt;ul&gt;
&lt;li&gt;ServerにSSL証明書が必要.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Strict&lt;/code&gt;: HTTPできたRequestをHTTPSにupgradeする.

&lt;ul&gt;
&lt;li&gt;Enterprise only.&lt;/li&gt;
&lt;li&gt;ServerにSSL証明書が必要.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;今回は &lt;code&gt;Flexible&lt;/code&gt; を選択.&lt;/p&gt;

&lt;h3 id=&#34;hsts:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;HSTS&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;HSTSと言うのは &lt;code&gt;HTTP Strict Transport Security&lt;/code&gt; の略で、
Web serverがWeb browserに対して、次回以降HTTPの代わりにHTTPSを使うように伝達する機能.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;次回以降&lt;/strong&gt;なので初回はHTTPでRequestし、その次からHTTPSを強制することができる.
(もちろん初回からHTTPSでRequestもできる.)&lt;/p&gt;

&lt;p&gt;初回から強制するために、BrowserがHSTSの設定のpreloadを行う機能もある.
(CloadFlareでもpreloadを有効にすることが可能.)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;HSTSの設定は &lt;code&gt;SSL&lt;/code&gt; 同様に上のMenuの &lt;code&gt;Crypto&lt;/code&gt;&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/crypto.png&#34; alt=&#34;20160129/crypto.png&#34;&gt;


&lt;p&gt;から行う.&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/hsts.png&#34; alt=&#34;20160129/hsts.png&#34;&gt;


&lt;h3 id=&#34;subdomain:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;Subdomain&lt;/h3&gt;

&lt;p&gt;Subdomainの設定は上のMenuの &lt;code&gt;DNS&lt;/code&gt;&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/dns.png&#34; alt=&#34;20160129/dns.png&#34;&gt;


&lt;p&gt;から行う.&lt;/p&gt;

&lt;p&gt;今回はSubdomainが &lt;em&gt;blog.rudolph-miller.com&lt;/em&gt; でGitHub PagesのDomainが &lt;em&gt;rudolph-miller.github.io&lt;/em&gt; なので、&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/dns_input.png&#34; alt=&#34;20160129/dns_input.png&#34;&gt;


&lt;p&gt;こんな感じに &lt;code&gt;CNAME&lt;/code&gt; を登録し、&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/dns_status.png&#34; alt=&#34;20160129/dns_status.png&#34;&gt;


&lt;p&gt;&lt;code&gt;Status&lt;/code&gt; を&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/not_penetrating.png&#34; alt=&#34;20160129/not_penetrating.png&#34;&gt;


&lt;p&gt;から&lt;/p&gt;

&lt;img src=&#34;https://blog.rudolph-miller.com/images/20160129/penetrating.png&#34; alt=&#34;20160129/penetrating.png&#34;&gt;


&lt;p&gt;にClickで変更すると完了.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;DNSの反映待ちはあったが、簡単にCustom domainなGitHub Pagesを簡単にSSL対応できた.&lt;/p&gt;

&lt;h1 id=&#34;see-also:cf68b4f8581564027f3288c1c2c90b3d&#34;&gt;See Also&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cloudflare.com/&#34;&gt;CloudFlare&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.benburwell.com/posts/configuring-cloudflare-universal-ssl/&#34;&gt;Configuring CloudFlare’s Universal SSL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://help.github.com/articles/setting-up-a-custom-domain-with-github-pages/&#34;&gt;Setting up a custom domain with GitHub Pages&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>